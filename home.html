<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Sistema de Cadastro e Trabalhos</title>
    <link rel="stylesheet" href="styles/main.css" />
    <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
  />
  </head>
  <body>
    <header class="site-header">
      <img
        src="https://i.ibb.co/fGrgrb7r/ancora-baba-fe.jpg"
        alt="Logo CEUNSC"
        class="logo"
      />
      <h1 class="site-title">Cadastro de Consulentes e Trabalhos</h1>
    </header>

    <!-- menu de abas -->
    <div id="menu_opt"></div>

    <!-- aba Cadastro -->
    <section id="cadastro-section">
      <div class="card">
        <h2>Cadastro</h2>
        <div class="input-container-title">
          <input type="text" id="cadastro-nome" placeholder=" " required />
          <label for="cadastro-nome">Nome*</label>
        </div>
        <div class="input-container-title">
          <input type="text" id="cadastro-telefone" placeholder=" " required />
          <label for="cadastro-telefone">Telefone*</label>
        </div>
        <button id="btn-cadastrar">Cadastrar</button>
        <div id="cadastro-message" class="message"></div>
      </div>
    </section>

    <!-- container de registro de trabalhos-->
    <section id="trabalhos-section">
      <div class="card">
        <h2>Trabalhos</h2>
        <div class="input-container-title">
          <input type="text" id="trabalhos-nome" placeholder=" " required />
          <label for="trabalhos-nome">Nome*</label>
        </div>
        <div class="input-container-title">
          <input type="text" id="trabalhos-telefone" placeholder=" " required />
          <label for="trabalhos-telefone">Telefone*</label>
        </div>
        <div class="trabalho-data-container">
          <label for="trabalhos-data">Data da Consulta</label>
          <input
            type="date"
            id="trabalhos-data"
            min="1900-01-01"
            max="9999-12-31"
          />
        </div>

        <!-- Dropdown Principal -->
        <div class="dropdown" id="dropdown-trabalhos">
          <button
            type="button"
            class="dropbtn"
            id="dropbtn-trabalhos"
            aria-expanded="false"
          >
            Selecione Trabalhos
          </button>
          <div class="dropdown-content">
            <label
              ><input type="checkbox" value="Descarrego Dandalunda" />
              Descarrego Dandalunda</label
            >
            <label
              ><input type="checkbox" value="Descarrego" /> Descarrego</label
            >
            <label
              ><input type="checkbox" value="Sacudimento" /> Sacudimento</label
            >
            <label
              ><input
                type="checkbox"
                id="checkbox-fogo"
                value="Saída de Fogo"
              />
              Saída de Fogo</label
            >
            <label
              ><input type="checkbox" value="Limpeza de flor de omolu" />
              Limpeza de flor de omolu</label
            >
            <label
              ><input type="checkbox" id="checkbox-cura" value="Cura" />
              Cura</label
            >
            <label
              ><input type="checkbox" id="checkbox-ebo" value="Ebó" />
              Ebó</label
            >
          </div>
        </div>

        <!-- Sub-Dropdown Saída de Fogo -->
        <div class="dropdown sub-dropdown hide" id="dropdown-fogo">
          <button
            type="button"
            class="dropbtn"
            id="dropbtn-fogo"
            aria-expanded="false"
          >
            Selecione Tipo de Saída de Fogo
          </button>
          <div class="dropdown-content">
            <label><input type="checkbox" value="Fogo Exu Encruzilhada Simples" /> Fogo Exu Encruzilhada Simples</label>
            <label><input type="checkbox" value="Fogo Exu Encruzilhada Na Pesada" /> Fogo Exu Encruzilhada Na Pesada</label>
            
            <label><input type="checkbox" value="Fogo Exu Calunga Simples" /> Fogo Exu Calunga Simples</label>
            <label><input type="checkbox" value="Fogo Exu Calunga Na Pesada" /> Fogo Exu Calunga Na Pesada</label>
            
            <label><input type="checkbox" value="Fogo Pomba-gira Encruzilhada Simples" /> Fogo Pomba-gira Encruzilhada Simples</label>
            <label><input type="checkbox" value="Fogo Pomba-gira Encruzilhada Na Pesada" /> Fogo Pomba-gira Encruzilhada Na Pesada</label>
            
            <label><input type="checkbox" value="Fogo Pomba-gira Calunga Simples" /> Fogo Pomba-gira Calunga Simples</label>
            <label><input type="checkbox" value="Fogo Pomba-gira Calunga Na Pesada" /> Fogo Pomba-gira Calunga Na Pesada</label>
            
            <label><input type="checkbox" value="Fogo Ogum Simples" /> Fogo Ogum Simples</label>
            <label><input type="checkbox" value="Fogo Ogum Na Pesada" /> Fogo Ogum Na Pesada</label>
            
            <label><input type="checkbox" value="Fogo Xangô Simples" /> Fogo Xangô Simples</label>
            <label><input type="checkbox" value="Fogo Xangô Na Pesada" /> Fogo Xangô Na Pesada</label>
            
            <label><input type="checkbox" value="Fogo Oxossi Simples" /> Fogo Oxossi Simples</label>
            <label><input type="checkbox" value="Fogo Oxossi Na Pesada" /> Fogo Oxossi Na Pesada</label>
            
            <label><input type="checkbox" value="Fogo Oxum Simples" /> Fogo Oxum Simples</label>
            <label><input type="checkbox" value="Fogo Oxum Na Pesada" /> Fogo Oxum Na Pesada</label>
            
            <label><input type="checkbox" value="Fogo Nanã Simples" /> Fogo Nanã Simples</label>
            <label><input type="checkbox" value="Fogo Nanã Na Pesada" /> Fogo Nanã Na Pesada</label>
            
            <label><input type="checkbox" value="Fogo Iemanjá Simples" /> Fogo Iemanjá Simples</label>
            <label><input type="checkbox" value="Fogo Iemanjá Na Pesada" /> Fogo Iemanjá Na Pesada</label>
            
            <label><input type="checkbox" value="Fogo Iansã Simples" /> Fogo Iansã Simples</label>
            <label><input type="checkbox" value="Fogo Iansã Na Pesada" /> Fogo Iansã Na Pesada</label>
            
            <label><input type="checkbox" value="Fogo Beijada Simples" /> Fogo Beijada Simples</label>
            <label><input type="checkbox" value="Fogo Beijada Na Pesada" /> Fogo Beijada Na Pesada</label>
            
            <label><input type="checkbox" value="Fogo Preto Velho Mineiro Simples" /> Fogo Preto Velho Mineiro Simples</label>
            <label><input type="checkbox" value="Fogo Preto Velho Mineiro Na Pesada" /> Fogo Preto Velho Mineiro Na Pesada</label>
            
            <label><input type="checkbox" value="Fogo Preto Velho Angola Simples" /> Fogo Preto Velho Angola Simples</label>
            <label><input type="checkbox" value="Fogo Preto Velho Angola Na Pesada" /> Fogo Preto Velho Angola Na Pesada</label>
            
            <label><input type="checkbox" value="Fogo Preto Velho Congo Simples" /> Fogo Preto Velho Congo Simples</label>
            <label><input type="checkbox" value="Fogo Preto Velho Congo Na Pesada" /> Fogo Preto Velho Congo Na Pesada</label>
            
            <label><input type="checkbox" value="Fogo Preto Velho Bahia Simples" /> Fogo Preto Velho Bahia Simples</label>
            <label><input type="checkbox" value="Fogo Preto Velho Bahia Na Pesada" /> Fogo Preto Velho Bahia Na Pesada</label>
            
            <label><input type="checkbox" value="Fogo Preto Velho Bahiano Simples" /> Fogo Preto Velho Bahiano Simples</label>
            <label><input type="checkbox" value="Fogo Preto Velho Bahiano Na Pesada" /> Fogo Preto Velho Bahiano Na Pesada</label>
            <label
              ><input type="checkbox" value="Fogo Círculo de Fogo" /> Fogo
              Círculo de Fogo</label
            >
            <label
              ><input type="checkbox" value="Fogo Círculo de Fogo Pequeno" />
              Fogo Círculo de Fogo Pequeno</label
            >
            <label
              ><input type="checkbox" value="Fogo Descarrego de Pé" /> Fogo
              Descarrego de Pé</label
            >
            <label
              ><input type="checkbox" value="Fogo Descarrego de Mão" /> Fogo
              Descarrego de Mão</label
            >
          </div>
        </div>

        <!-- Sub-Dropdown Cura (inicialmente oculto) -->
        <div class="dropdown sub-dropdown hide" id="dropdown-cura">
          <button
            type="button"
            class="dropbtn"
            id="dropbtn-cura"
            aria-expanded="false"
          >
            Selecione Tipo de Cura
          </button>
          <div class="dropdown-content">
            <label><input type="checkbox" value="Cura Ori 1" /> Cura Ori 1</label>
            <label><input type="checkbox" value="Cura Ori 2" /> Cura Ori 2</label>
            <label><input type="checkbox" value="Cura Ori 3" /> Cura Ori 3</label>
            
            <label><input type="checkbox" value="Cura Emoções 1" /> Cura Emoções 1</label>
            <label><input type="checkbox" value="Cura Emoções 2" /> Cura Emoções 2</label>
            <label><input type="checkbox" value="Cura Emoções 3" /> Cura Emoções 3</label>
            
            <label><input type="checkbox" value="Cura Prosperidade 1" /> Cura Prosperidade 1</label>
            <label><input type="checkbox" value="Cura Prosperidade 2" /> Cura Prosperidade 2</label>
            <label><input type="checkbox" value="Cura Prosperidade 3" /> Cura Prosperidade 3</label>
            
            <label><input type="checkbox" value="Cura Saúde 1" /> Cura Saúde 1</label>
            <label><input type="checkbox" value="Cura Saúde 2" /> Cura Saúde 2</label>
            <label><input type="checkbox" value="Cura Saúde 3" /> Cura Saúde 3</label>
            
            <label><input type="checkbox" value="Cura Vicío 1" /> Cura Vicío 1</label>
            <label><input type="checkbox" value="Cura Vicío 2" /> Cura Vicío 2</label>
            <label><input type="checkbox" value="Cura Vicío 3" /> Cura Vicío 3</label>
          </div>
        </div>

        <!-- Sub-Dropdown Ebó (inicialmente oculto) -->
        <div class="dropdown sub-dropdown hide" id="dropdown-ebo">
          <button
            type="button"
            class="dropbtn"
            id="dropbtn-ebo"
            aria-expanded="false"
          >
            Selecione Tipo de Ebó
          </button>
          <div class="dropdown-content">
            <label><input type="checkbox" value="Ebó Exu Encruzilhada" /> Ebó Exu Encruzilhada</label>
            <label><input type="checkbox" value="Ebó Exu Calunga" /> Ebó Exu Calunga</label>
            <label><input type="checkbox" value="Ebó Pomba-gira Encruzilhada" /> Ebó Pomba-gira Encruzilhada</label>
            <label><input type="checkbox" value="Ebó Pomba-gira Calunga" /> Ebó Pomba-gira Calunga</label>
            <label><input type="checkbox" value="Ebó Ogum" /> Ebó Ogum</label>
            <label><input type="checkbox" value="Ebó Xangô" /> Ebó Xangô</label>
            <label><input type="checkbox" value="Ebó Oxossi" /> Ebó Oxossi</label>
            <label><input type="checkbox" value="Ebó Oxum" /> Ebó Oxum</label>
            <label><input type="checkbox" value="Ebó Nanã" /> Ebó Nanã</label>
            <label><input type="checkbox" value="Ebó Iemanjá" /> Ebó Iemanjá</label>
            <label><input type="checkbox" value="Ebó Iansã" /> Ebó Iansã</label>
            <label><input type="checkbox" value="Ebó Beijada" /> Ebó Beijada</label>
            <label><input type="checkbox" value="Ebó Preto Velho Mineiro" /> Ebó Preto Velho Mineiro</label>
            <label><input type="checkbox" value="Ebó Preto Velho Congo" /> Ebó Preto Velho Congo</label>
            <label><input type="checkbox" value="Ebó Preto Velho Angola" /> Ebó Preto Velho Angola</label>
            <label><input type="checkbox" value="Ebó Preto Velho Bahia" /> Ebó Preto Velho Bahia</label>
          </div>
        </div>

        <button id="btn-registrar">Registrar Trabalho</button>
      </div>
      <div id="trabalhos-message" class="message-trabalhos hide"></div>
    </section>

    <!-- Seção de Relatório de Trabalhos -->
    <section id="relatorio-section">
      <div class="card">
        <h2>Relatório de Trabalhos</h2>
        <h3>Selecione as datas da consulta</h3>
        <div class="data-container">
          <label for="relatorio-data">Data Inicial</label>
          <input
            type="date"
            id="relatorio-data"
            min="1900-01-01"
            max="9999-12-31"
          />
          <label for="relatorio-data-final">Data Final</label>
          <input
            type="date"
            id="relatorio-data-final"
            min="1900-01-01"
            max="9999-12-31"
          />
          <label style="display: flex; align-items: center; gap: 10px; margin-top: 10px;">
            <input type="checkbox" id="checkbox-pegar-feitos" />
            Pegar feitos
          </label>
        </div>
        <button id="btn-buscar-relatorio">Buscar</button>
        <div id="relatorio-message" class="message"></div>
        <div id="relatorio-filtros" class="filtros-container"></div>
        <button id="btn-aplicar-filtros" class="btn-aplicar-filtros">
          Filtrar
        </button>
        <button id="btn-limpar-filtro" class="btn-limpar-filtros">
          Restaurar Filtros
        </button>
        <button id="btn-refresh" class="btn-limpar-filtros">Atualizar Tabela</button>
        <div id="relatorio-mensagem" class="mensagem"></div>
      </div>
    
      <div id="relatorio-tabela-container">
        <table>
          <thead>
            <tr>
              <th>Data</th>
              <th>Consulente</th>
              <th>Telefone</th>
              <th>Descarrego</th>
              <th>Sacudimento</th>
              <th>Ebó</th>
              <th>Limpeza de Flor de Omolu</th>
              <th>Saída de Fogo</th>
              <!-- Novas colunas de Feito e Não Compareceu -->
              <th>Feito</th>
              <th>Não Compareceu</th>
            </tr>
          </thead>
          <tbody>
            <!-- Linhas de dados serão geradas dinamicamente pelo JS -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- Seção de Relatório de Curas -->
<section id="relatorio-cura-section">
  <div class="relatorio-cura-card">
    <h2>Relatório de Curas</h2>
    <h3>Filtrar por consulente</h3>
    <div class="data-container-cura">
      <!-- filtro inicial por consulente -->
      <label for="filtro-inicial-consulente">Consulente</label>
      <input
        type="text"
        id="filtro-inicial-consulente"
        placeholder="Digite o nome do consulente"
      />
      <!-- checkbox “Pegar feitos” mantida -->
      <label style="display: flex; align-items: center; gap: 10px; margin-top: 10px;">
        <input type="checkbox" id="checkbox-pegar-feitos-cura" />
        Pegar feitos
      </label>
    </div>
    <button id="btn-buscar-relatorio-cura">Buscar</button>
    <div id="relatorio-cura-message" class="message-cura"></div>

    <!-- Filtros ocultos, aparecem após o relatório ser gerado -->
    <div id="relatorio-cura-filtros" class="filtros-container-cura" style="display:none; margin-top:15px;">
      <label>
        Consulente:
        <input type="text" id="filtro-consulente" placeholder="Filtrar por consulente" />
      </label>
      <label>
        Tipo de Oração:
        <input type="text" id="filtro-tipo-oracao" placeholder="Filtrar por tipo de oração" />
      </label>
      <label><input type="checkbox" id="filtro-agua" /> AGUA</label>
      <label><input type="checkbox" id="filtro-cha" /> CHÁ</label>
      <label><input type="checkbox" id="filtro-banho" /> BANHO</label>
      <label><input type="checkbox" id="filtro-bastao" /> BASTÃO</label>
      <label><input type="checkbox" id="filtro-canjica" /> CANJICA</label>
      <label><input type="checkbox" id="filtro-ebo-prosperidade" /> EBÓ PROSPERIDADE</label>
      <label><input type="checkbox" id="filtro-imersao" /> IMERSÃO</label>
      <label><input type="checkbox" id="filtro-remedio-vicio" /> REMÉDIO VÍCIO</label>
      <label><input type="checkbox" id="filtro-material-arreada-exu" /> MATERIAL ARREADA EXU</label>
      <label><input type="checkbox" id="filtro-espada-sao-jorge" /> ESPADA SÃO JORGE</label>
    </div>

    <!-- Botões ocultos para resetar filtros e atualizar tabela -->
    <button id="btn-aplicar-filtros-cura" class="btn-aplicar-filtros-cura" style="display:none;">Filtrar</button>
    <button id="btn-limpar-filtro-cura" class="btn-limpar-filtros-cura" style="display:none;">Restaurar Filtros</button>
    <button id="btn-refresh-cura" class="btn-limpar-filtros-cura" style="display:none;">Atualizar Tabela</button>
  </div>

  <div id="relatorio-cura-tabela-container" style="margin-top:20px;">
    <table>
      <thead>
        <tr>
          <th>Data</th>
          <th>Consulente</th>
          <th>Cura</th>
        </tr>
      </thead>
      <tbody>
        <!-- Linhas de dados geradas dinamicamente -->
      </tbody>
    </table>
  </div>
</section>

    <!-- script de menu -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const menuContainer = document.getElementById("menu_opt");
        const tabs = [
          { label: "Cadastro", sectionId: "cadastro-section" },
          { label: "Registro Trabalhos", sectionId: "trabalhos-section" },
          { label: "Relatório Trabalhos", sectionId: "relatorio-section" },
          { label: "Relatório de Cura", sectionId: "relatorio-cura-section"},
        ];

        tabs.forEach((tab) => {
          const btn = document.createElement("button");
          btn.textContent = tab.label;
          btn.addEventListener("click", () => {
            menuContainer
              .querySelectorAll("button")
              .forEach((b) => b.classList.remove("active"));
            btn.classList.add("active");
            document
              .querySelectorAll("body > section")
              .forEach((sec) => (sec.style.display = "none"));
            document.getElementById(tab.sectionId).style.display = "block";
          });
          menuContainer.appendChild(btn);
        });

        menuContainer.style.visibility = "visible";
        menuContainer.querySelector("button").click();
      });
    </script>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // testa suporte nativo
    const test = document.createElement("input");
    test.type = "date";
    if (test.type === "text") {
      // não suporta nativo → inicializa Flatpickr em todos os date inputs
      flatpickr("input[type=date]", {
        dateFormat: "d/m/Y",
        allowInput: true,
      });
    }
  });
</script>

    <!-- seus JS separados -->
    <script src="cadastro/cadastro.js"></script>
    <script src="trabalhos/registro.js"></script>
    <script src="trabalhos/consulta.js"></script>
    <script src="trabalhos/relatorio-cura.js"></script>
  </body>
</html>
